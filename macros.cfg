[gcode_macro UNLOAD_FILAMENT]
description: "Unload filament from the extruder"
gcode:
  M104 S200                       # Set hotend temperature to 200°C
  M109 S200                       # Wait for hotend to reach 200°C
  G91                             # Enable relative positioning
  G1 Z50 F3000                    # Raise Z-axis by 50mm
  G90                             # Return to absolute positioning
  G1 X0 Y0 F3000                  # Move to front-center position
  G92 E0                          # Reset extruder position
  G1 E-10 F300                    # Retract 10mm of filament quickly
  G1 E-50 F100                    # Slowly retract 50mm of filament
  M117 "Filament Unloaded"        # Display message

[gcode_macro CLEAN_NOZZLE]
description: "Position nozzle for cleaning"
gcode:
  M104 S200                       # Set hotend temperature to 200°C
  M109 S200                       # Wait for hotend to reach 200°C
  G91                             # Enable relative positioning
  G1 Z50 F3000                    # Raise Z-axis by 50mm
  G90                             # Return to absolute positioning
  G1 X0 Y0 F3000                  # Move to front-center position
  M117 "Clean nozzle manually and click RESUME in Mainsail"  # Instruction message
  G4 P2000                        # Optional: 2-second delay to display message
  PAUSE                           # Pause for manual cleaning
  RESUME                          # Resume after cleaning
  G1 E5 F300                      # Optional: Extrude 5mm to ensure nozzle is clear
  M117 "Nozzle cleaning complete" # Display message

[gcode_macro LOAD_FILAMENT]
description: "Load filament into the extruder"
gcode:
  M104 S200                       # Set hotend temperature to 200°C
  M109 S200                       # Wait for hotend to reach 200°C
  G91                             # Enable relative positioning
  G1 Z50 F3000                    # Raise Z-axis by 50mm
  G90                             # Return to absolute positioning
  G1 X0 Y0 F3000                  # Move to front-center position
  G92 E0                          # Reset extruder position
  G1 E10 F100                     # Slowly extrude 10mm of filament
  G1 E50 F300                     # Extrude 50mm of filament at a faster rate
  G1 E10 F100                     # Fine extrusion to ensure filament flow
  M117 "Filament Loaded"          # Display message
